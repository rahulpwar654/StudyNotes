Spring Security

https://medium.com/@haytambenayed/how-does-spring-security-work-internally-525d359d7af


Image:
https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66qT-P8eO7psafi_t5jfcA.jpeg



SecurityFilterChain :

Spring Security maintains a filter chain internally where each of the filters is invoked in a specific order. 
Each filter will try to process the request and retrieve authentication information from it. 
For example, we have the UsernamePasswordAuthenticationFilter which is used in case of a POST request 
with username and password parameters (typically with a login page).
the ordering of the filters is important as there are dependencies between them. 
You can read here if you want to know more about filters and ordering. Or, you can directly navigate to the 
FilterComparator class to see the implementation details.

AuthenticationManager : 
This is an interface whose implementation (ProviderManager) has a list of configured AuthenticationProviders that are 
used for authenticating user requests.

AuthenticationProvider : 

An AuthenticationProvider is an abstraction for fetching user information from a 
specific repository (like a database, LDAP, custom third party source, etc.). 
It uses the fetched user information to validate the supplied credentials. 
(e.g: DaoAuthenticationProvider, LdapAuthenticationProvider, OpenIDAuthenticationProvider ‚Ä¶)
When talking about AuthenticationProvider, we usually come across the UserDetailsService. 
There is often a confusion between both, although they have different roles. 
AuthenticationProvider authenticates(compares) the request credentials against system credentials. 
UserDetailsService is purely a DAO for user data and performs no other function other than to supply that 
data that match with user provided Username. It does not tell the application whether authentication is successful or failed.





#####Authentication Flow#####
Now that we know the fundamental elements of Spring Security‚Äôs architecture, let‚Äôs describe the execution of the authentication flow :

When an incoming request reaches our system, Spring Security starts by choosing the right security filter to 
process that request (Is the request a POST containing username and password elements? => UsernamePasswordAuthenticationFilter is chosen. 
Is the request having a header ‚ÄúAuthorization : Basic base64encoded(username:password)‚Äù? => BasicAuthenticationFilter is chosen‚Ä¶ and 
so the chaining goes on). When a filter had successfully retrieved Authentication informations from the request, 
the AuthenticationManager is invoked to authenticate the request. via its implementation, the AuthenticationManager goes through 
each of the provided AuthenticationProvider(s) and try to authenticate the user based on the passed Authentication Object. 
when the Authentication is successful, and a matching user is found, an Authentication Object containing the 
user Authorities (which will be used to manage the user access to the system‚Äôs resources) is returned and set into the SecurityContext.



##############

Here‚Äôs a quick list of key **Spring Security components** with one-line descriptions:

---

### üîê Core Components of Spring Security

| Component                  | Description                                                                 |
|----------------------------|-----------------------------------------------------------------------------|
| **SecurityContext**        | Holds the security information (like authentication) of the current user.  |
| **Authentication**         | Represents the principal and credentials of a user trying to access the system. |
| **AuthenticationManager**  | Validates user credentials and returns an authenticated `Authentication` object. |
| **UserDetailsService**     | Loads user-specific data during authentication.                            |
| **UserDetails**            | Interface representing user information like username, password, roles.    |
| **GrantedAuthority**       | Represents a permission or role assigned to the user.                      |
| **SecurityFilterChain**    | Defines the sequence of filters applied to incoming requests.              |
| **UsernamePasswordAuthenticationFilter** | Handles login requests with username and password.             |
| **BasicAuthenticationFilter** | Processes HTTP Basic authentication headers.                          |
| **ExceptionTranslationFilter** | Converts security exceptions into HTTP responses.                   |
| **AccessDecisionManager**  | Determines if a user has access to a secured resource.                     |
| **HttpSecurity**           | Configures web-based security for specific HTTP requests.                  |
| **WebSecurityConfigurerAdapter** | Customizes security settings (deprecated in newer versions).         |
| **SecurityConfigurerAdapter** | Base class for configuring security filters and settings.              |
| **FilterSecurityInterceptor** | Enforces access control on secured URLs.                              |
| **AuthenticationProvider** | Performs actual authentication logic (e.g., database, LDAP).              |

---

Let me know if you‚Äôd like a diagram or code examples to see how these components interact in a real Spring Boot app.
